<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Bring Your Own Book</title>
	<meta name="description" content="">
	<meta name="author" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/skeleton.css">
	<link rel="stylesheet" href="css/magnific.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="icon" type="image/png" href="images/favicon.png">
</head>
<body>

<div class="section hero">
	<div class="container">
		<div class="row">
			<div class="header">
				<img class="logo" src="images/logo.png" title="Bring Your Own Book">
				<div>
					<h1 class="logotype">Bring Your Own Book</h1>
					<h3 class="subtitle">The game of books and borrowed phrases.</h3>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="section nav">
	<div class="container">
		<div class="row">
			<ul>
				<li><a href="https://www.kickstarter.com/projects/ironmaus/bring-your-own-book-the-game-of-borrowed-phrases" target="_blank">KICKSTARTER!</a></li>
				<li><a href="#the-game">The Game</a></li>
				<li><a href="#print-and-play">Print &amp; Play</a></li>
				<li><a href="#about-us">About Us</a></li>
				<li><a href="mailto:dobetter@dobettergames.com">Questions</a></li>
			</ul>
		</div>
	</div>
</div>

<div class="section the-game" id="the-game">
	<div class="container">
		<div class="row">
			<br>
			<h2 class="fill">The Game</h2>
			<div class="decor">
				<img class="right" src="images/decoration.png">
				<hr>
			</div>
		</div>
		<div class="row">
			<div class="five columns">
				<a class="popup-modal" href="#order-modal">Open modal</a>
				<div id="order-modal" class="white-popup-block mfp-hide modal ordering">
					<div class="stage ordering">
						<div class="row">
							<br>
							<h4 class="fill">Preorder</h4>
							<div class="decor">
								<img class="right" src="images/decoration.png">
								<hr>
							</div>
						</div>
						<div class="row">
							<div class="eight columns details">
								<br>
								<img class="book fill" src="images/book.png"><br>
								<strong>Bring Your Own Book</strong>
								<p>First Printing</p>
							</div>
							<div class="four columns">
								<label for="quantity">Quantity</label>
								<input id="quantity" class="u-full-width" type="number" min="1" max="10" step="1" value="1" name="quantity">
								<label for="total">Total</label>
								<input id="total" class="u-full-width" type="text" value="$25" name="total" readonly>
							</div>
						</div>
						<hr class="thin">
						<div class="row">
							<label for="shipping">Shipping</label>
							<select class="u-full-width" id="shipping">
								<option value="US">United States</option>
								<option value="CA">Canada</option>
								<option value="WW">Worldwide (excl. Brazil)</option>
							</select>
						</div>

						<div class="row state">
							<label for="state">State</label>
							<select class="u-full-width" id="state">
								<option value="AL">Alabama</option>
								<option value="AK">Alaska</option>
								<option value="AZ">Arizona</option>
								<option value="AR">Arkansas</option>
								<option value="CA">California</option>
								<option value="CO">Colorado</option>
								<option value="CT">Connecticut</option>
								<option value="DE">Delaware</option>
								<option value="DC">District Of Columbia</option>
								<option value="FL">Florida</option>
								<option value="GA">Georgia</option>
								<option value="HI">Hawaii</option>
								<option value="ID">Idaho</option>
								<option value="IL">Illinois</option>
								<option value="IN">Indiana</option>
								<option value="IA">Iowa</option>
								<option value="KS">Kansas</option>
								<option value="KY">Kentucky</option>
								<option value="LA">Louisiana</option>
								<option value="ME">Maine</option>
								<option value="MD">Maryland</option>
								<option value="MA">Massachusetts</option>
								<option value="MI">Michigan</option>
								<option value="MN">Minnesota</option>
								<option value="MS">Mississippi</option>
								<option value="MO">Missouri</option>
								<option value="MT">Montana</option>
								<option value="NE">Nebraska</option>
								<option value="NV">Nevada</option>
								<option value="NH">New Hampshire</option>
								<option value="NJ">New Jersey</option>
								<option value="NM">New Mexico</option>
								<option value="NY">New York</option>
								<option value="NC">North Carolina</option>
								<option value="ND">North Dakota</option>
								<option value="OH">Ohio</option>
								<option value="OK">Oklahoma</option>
								<option value="OR">Oregon</option>
								<option value="PA">Pennsylvania</option>
								<option value="RI">Rhode Island</option>
								<option value="SC">South Carolina</option>
								<option value="SD">South Dakota</option>
								<option value="TN">Tennessee</option>
								<option value="TX">Texas</option>
								<option value="UT">Utah</option>
								<option value="VT">Vermont</option>
								<option value="VA">Virginia</option>
								<option value="WA">Washington</option>
								<option value="WV">West Virginia</option>
								<option value="WI">Wisconsin</option>
								<option value="WY">Wyoming</option>
							</select>
						</div>
						<hr class="thin">
						<div class="row">
							<button class="buy bright u-full-width">pay now with stripe</button>
						</div>
					</div>
					<div class="stage success">
						<div class="row">
							<br>
							<h4 class="fill">Hooray!</h4>
							<div class="decor">
								<img class="right" src="images/decoration.png">
								<hr>
							</div>
						</div>
						<div class="row">
							<p>We'll let you know when it ships, sometime in October.</p>
						</div>
						<div class="row">
							<div class="four columns">
								<button class="u-full-width cancel">cancel</button>
							</div>
							<div class="eight columns">
								<button class="pay bright u-full-width">try again</button>
							</div>
						</div>
					</div>
					<div class="stage failed">
						<div class="row">
							<br>
							<h4 class="fill">Oops</h4>
							<div class="decor">
								<img class="right" src="images/decoration.png">
								<hr>
							</div>
						</div>
						<div class="row">
							<p>Something went wrong. Sorry about that.</p>
						</div>
						<div class="row">
							<div class="four columns">
								<button class="u-full-width cancel">cancel</button>
							</div>
							<div class="eight columns">
								<button class="pay bright u-full-width">try again</button>
							</div>
						</div>
					</div>
					<div class="stage paying">
						<div class="row">
							<br>
							<h4 class="fill">Complete preorder</h4>
							<div class="decor">
								<img class="right" src="images/decoration.png">
								<hr>
							</div>
						</div>
						<div class="row">
							<div class="four columns">
								<button class="u-full-width back">back</button>
							</div>
							<div class="eight columns">
								<button class="pay bright u-full-width">pay now with Stripe</button>
							</div>
						</div>
					</div>
				</div>

				<p><em>Bring Your Own Book</em> is the game of borrowed phrases, where players search through books for text to take way out of context.</p>
				<p>It's easy. Players take turns drawing prompts from the deck, then race to find the best phrase in their own book that satisfies the prompt. Since you can use a different book each time, you can play it with any audience, and there's a practically infinite supply of source material.</p>
				<ul>
					<li>Is there a tasty “name for a candy bar” in that sci-fi novel you’ve been toting around?</li>
					<li>How quickly can you find a “line from a country western song” in your dog training book?</li>
					<li>Will there be any “advice for graduating seniors” in your anthology of limericks?</li>
				</ul>
				<p>Grab a copy of <em>Bring Your Own Book</em> and find out!</p>
			</div>
			<div class="seven columns">
				<!--<img class="u-full-width" src="images/action.png" title="Bring Your Own Book in action!">-->

				<div class="order">
					<!--<button class="buy bright">Preorder</button>-->
					<a href="https://docs.google.com/forms/d/1ASANJK29CE7mx2ArM8pub1r_crZcbgFwpXJHg6N5MOI/viewform" target="_blank" class="button print">Download for free</a>
				</div>

				<div class="ornament">
					<br>
					<img class="book fill" src="images/book.png">
					<div class="decor">
						<hr>
					</div>
				</div>
				<div class="showcase">
					<img class="u-full-width page" src="images/page.jpg" title="Bring Your Own Book in action!">
					<img class="u-full-width card" src="images/card.jpg" title="Bring Your Own Book in action!">
				</div>
			</div>
		</div>
	</div>
</div>


<div class="section print-and-play" id="print-and-play">
	<div class="container">
		<div class="row">
			<br>
			<h2 class="fill">Print &amp; Play</h2>
			<div class="decor">
				<img class="right" src="images/decoration.png">
				<hr>
			</div>
		</div>
		<div class="row">
			<div class="five columns">
				<p>Download the print-and-play demo of <em>Bring Your Own Book</em>. All you’ll need are three sheets of paper, a one-minute timer, and some friends with books.
Pro tip: Get your friends to cut the cards out.</p>
				<p>If you’ve played before and want to extend the experience, there are additional rule sets that can make the <em>Bring Your Own Book</em> experience more democratic or cutthroat, depending on your mood.</p>
				<p>Download the PDF for rules and printing instructions.</p>
				<a class="button bright" href="https://docs.google.com/forms/d/1ASANJK29CE7mx2ArM8pub1r_crZcbgFwpXJHg6N5MOI/viewform" target="_blank">Download PDF</a>
			</div>
			<div class="five columns downloads">
				<h4>Classic Rules</h4>
				<ul class="links">
					<li><a class="button" href="https://drive.google.com/file/d/0BwumVZzji9IHUlpHeHhyVjdOdHM/view" target="_blank">quick start</a></li>
					<li><a class="button" href="https://drive.google.com/file/d/0BwumVZzji9IHQ0IyTTNvWHVPRXM/view" target="_blank">long form</a></li>
				</ul>
				<h4>Democratic Rules - With Voting</h4>
				<ul class="links">
					<li><a class="button" href="https://drive.google.com/file/d/0BwumVZzji9IHRTdPRHZvNDlDLUU/view?usp=sharing" target="_blank">quick start</a></li>
					<li class="disabled"><button>long form</button></li>
				</ul>
				<h4>Cutthroat Rules - Advanced</h4>
				<ul class="links">
					<li><a class="button" href="https://drive.google.com/file/d/0BwumVZzji9IHVjlkbmk3ZjM5Znc/view?usp=sharing" target="_blank">quick start</a></li>
					<li class="disabled"><button>long form</button></li>
				</ul>
			</div>
		</div>
		<br>
	</div>
</div>

<div class="section footer" id="about-us">
	<div class="container">
		<div class="row">
			<br>
			<h2 class="fill">About Us</h2>
			<div class="decor">
				<img class="right" src="images/decoration.png">
				<hr>
			</div>
		</div>
		<div class="row">
			<div class="four columns credits">
				<h4>Credits</h4>
				<ul>
					<li>
						<a href="http://www.ironmaus.com/" target="_blank">Matthew Moore</a><br>
						Game Design
					</li>
					<li>
						<a href="http://www.nalker.com/" target="_blank">Luke Nalker</a><br>
						Visual Design
					</li>
					<li>
						<span>Miranda Marti</span><br>
						Design &amp; QA
					</li>
					<li>
						<a href="http://www.helloprogram.com/" target="_blank">Adrian Bonar</a><br>
						Web Dev. &amp; Production
					</li>
					<li>
						<span>Thanks to</span><br>
						Ryan McIntyre
					</li>
				</ul>
			</div>
			<div class="four columns social">
				<h4>Stay connected</h4>
				<ul>
					<li><a href="https://www.kickstarter.com/projects/ironmaus/bring-your-own-book-the-game-of-borrowed-phrases" target="_blank">Kickstarter</a></li>
					<li><a href="https://www.facebook.com/DoBetterGames" target="_blank">Facebook</a></li>
					<li><a href="https://twitter.com/DoBetterGames" target="_blank">Twitter</a></li>
					<li><a href="http://dobettergames.tumblr.com/" target="_blank">Tumblr</a></li>
					<li><a href="https://www.youtube.com/channel/UCNcVynms6VLTsBW7b9zwBSg" target="_blank">YouTube</a></li>
				</ul>
			</div>
			<div class="four columns">
				<h4>Recent tweets</h4>
				<a class="twitter-timeline" href="https://twitter.com/DoBetterGames" data-widget-id="592510930916773888"></a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
			</div>
		</div>
		<div class="row ornament">
			<br>
			<img class="book fill" src="images/book.png">
			<div class="decor">
				<img src="images/inverted.png" class="left">
				<img src="images/decoration.png" class="right">
				<hr>
			</div>
		</div>
	</div>
</div>

<div class="section copy">
	<div class="container">
		<p>Copyright 2014-2015 &nbsp; <a href="#">Do Better Games, LLC</a></p>
	</div>
</div>
<script>
	WebFontConfig = {
		google: {families: ['Lato:400:latin', 'Lora:400,700:latin']}
	};
	 
	var cb = function() {
		var wf = document.createElement('script');
		wf.src = 'http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
		wf.type = 'text/javascript';
		wf.async = 'true';
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(wf, s);
	};
	 
	var raf = requestAnimationFrame || mozRequestAnimationFrame || webkitRequestAnimationFrame || msRequestAnimationFrame;
	 
	if (raf) {
		raf(cb);
	} else {
		window.addEventListener('load', cb);
	}
	window.onload = function(){
		window.setTimeout(function() { document.body.setAttribute("class","show"); }, 400)
	}
</script>
<!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>-->
<script src="js/zepto.min.js"></script>
<script src="https://checkout.stripe.com/checkout.js"></script>
<script>

// we only need to set this up once
var handler = StripeCheckout.configure({
	key: 'pk_test_PMBX4KLBxcejUqGQkcFch2KE',
	image: '/images/logo.png',
	token: function(token) {
		// Use the token to create the charge with a server-side script.
		// You can access the token ID with `token.id`
		var endpoint = "https://byob-store.appspot.com/charge";

		// get the current order
		var order = update();
		var data = {
			stripeToken: token.id,
			email: token.email,
			quantity: order.quantity,
			region: order.region,

		}
		var success = function(e) {
			// find out if the payment succeeded or failed
			// and response accordingly
			if (e == 1) {
				// succeeded!
				$("#order-modal").addClass("success");
				$("#order-modal").removeClass("ordering");
			} else {
				// failed
				$("#order-modal").addClass("failure");
				$("#order-modal").removeClass("ordering");
			}
			console.log(e);
			$('.buy').text("buy now");
			// change to success or failed page
			// depending on what we get back
		}
		$.ajax({
			type: "POST",
			url: endpoint,
			data: data,
			success: success,
		});
	}
});
	

	$('.buy').on('click', function(e) {

		// Open Checkout with further options
		// we should set this amount depending
		// on what the form has set up

		var order = update();

		var button = $(this);

		// change to spinner
		button.text("loading...");
		var name = "Bring Your Own Book";
		var description = "Preorder";



		handler.open({
			name: name,
			description: description,
			amount: order.total * 100,
			//shippingAddress: true,
			closed : function() {
				$('.buy').text("buy now");


				console.log("closed!");
			}
		});

		e.preventDefault();

	});

	// Close Checkout on page navigation
	$(window).on('popstate', function() {
		handler.close();
	});

</script>
<script src="js/magnific.min.js"></script>
<script>

$(function () {
	$('.popup-modal').magnificPopup({
		type: 'inline',
		preloader: false,
		focus: '#username',
	});
});

document.querySelector("input").addEventListener("keypress", function (evt) {
    if (evt.which < 48 || evt.which > 57)
    {
        evt.preventDefault();
    }
});

$('.checkout').on('click', function(e) {
	$("#order-modal").addClass("paying");
	$("#order-modal").removeClass("ordering");
	e.preventDefault();
})

$('.back').on('click', function(e) {
	$("#order-modal").addClass("ordering");
	$("#order-modal").removeClass("paying");
	e.preventDefault();
})

var shipping = $("#shipping");
var quantity = $("#quantity");
var total = $("#total");
var state = $(".state");

// we do this server side also
var pricing = {
	US: [25, 46, 67, 88, 109, 130, 151, 172, 183, 204],
	CA: [30, 57, 82, 104, 126, 148, 170, 192, 214, 236],
	WW: [35, 64, 93, 122, 151, 180, 209, 238, 267, 296],
}

var update = function() {

	// add up our region and total and update total
	var region = shipping[0].options[shipping[0].selectedIndex].value;
	var price = pricing[region][quantity[0].value - 1];
	// lookup cost for this region
	// add sales tax
	total[0].value = "$" + price;
	var order = {
		region: region,
		quantity: quantity[0].value,
		total: pricing[region][quantity[0].value - 1]
	}
	return order
}

shipping.change(function() {
	var value = shipping[0].options[shipping[0].selectedIndex].value;
	if (value == "US") {
		state.show();
	} else {
		state.hide();
	}
	update();
});

quantity.change(function() {
	if (quantity[0].value > 10) {
		quantity[0].value = 10;
	} else if (quantity[0].value < 1) {
		quantity[0].value = 1;
	}
	update();
});

</script>
<script src="https://www.paypalobjects.com/js/external/dg.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8">
var embeddedPPFlow = new PAYPAL.apps.DGFlow({trigger: 'submitBtn'});
</script>
</body>
</html>
